!function(){"use strict";var e,t={677:function(){var e,t=window.wp.blocks,o=window.React;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},l.apply(this,arguments)}var n=function(t){return o.createElement("svg",l({width:24,height:24,style:{color:"red"}},t),e||(e=o.createElement("path",{d:"M21.8 8s-.195-1.377-.795-1.984c-.76-.797-1.613-.8-2.004-.847-2.798-.203-6.996-.203-6.996-.203h-.01s-4.197 0-6.996.202c-.39.046-1.242.05-2.003.846C2.395 6.623 2.2 8 2.2 8S2 9.62 2 11.24v1.517c0 1.618.2 3.237.2 3.237s.195 1.378.795 1.985c.76.797 1.76.77 2.205.855 1.6.153 6.8.2 6.8.2s4.203-.005 7-.208c.392-.047 1.244-.05 2.005-.847.6-.607.795-1.985.795-1.985s.2-1.618.2-3.237V11.24C22 9.62 21.8 8 21.8 8zM9.935 14.595v-5.62l5.403 2.82-5.403 2.8z"})))},a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"boldblocks/youtube-block","title":"YouTube Block - A better way to embed YouTube video, short, playlist","category":"media","description":"Embed YouTube videos without slowing down your site.","keywords":["youtube","video","embed","insert"],"attributes":{"url":{"type":"string","__experimentalRole":"content"},"caption":{"type":"string","source":"html","selector":"figcaption","__experimentalRole":"content"},"aspectRatio":{"type":"string","default":"","__experimentalRole":"content"},"isMaxResThumbnail":{"type":"boolean","__experimentalRole":"content"},"customThumbnail":{"type":"string","__experimentalRole":"content"},"settings":{"type":"object"}},"supports":{"align":true,"spacing":{"margin":true},"interactivity":{"clientNavigation":true}},"textdomain":"better-youtube-embed-block","editorScript":"file:./index.js","viewScript":"file:./frontend.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),r=window.wp.element,i=window.wp.i18n,c=window.wp.blockEditor,s=window.wp.components,u=e=>{let{icon:t,label:o,value:l,onChange:n,onSubmit:a,isInvalidURL:u=!1}=e;const b=(0,i.__)("Input a YouTube video URL or an ID","better-youtube-embed-block");return(0,r.createElement)(s.Placeholder,{icon:(0,r.createElement)(c.BlockIcon,{icon:t,showColors:!0}),label:o,className:"boldblocks-youtube",instructions:b},(0,r.createElement)("form",{className:"boldblocks-youtube__form",onSubmit:a,style:{gap:"8px"}},(0,r.createElement)("input",{type:"text",value:l||"",className:"components-placeholder__input","aria-label":o,placeholder:b,onChange:n,style:{flex:"1 1 auto"}}),(0,r.createElement)(s.Button,{variant:"primary",type:"submit",className:"components-placeholder__submit"},(0,i._x)("Embed","Embed button label","better-youtube-embed-block"))),u&&(0,r.createElement)("div",{className:"components-placeholder__error"},(0,r.createElement)("div",{className:"components-placeholder__instructions"},b)))},b=window.wp.primitives,m=(0,r.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(b.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),p=(0,r.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(b.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})),d=(0,r.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(b.Path,{d:"M14.5 13.8c-1.1 0-2.1.7-2.4 1.8H4V17h8.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20v-1.5h-3.1c-.3-1-1.3-1.7-2.4-1.7zM11.9 7c-.3-1-1.3-1.8-2.4-1.8S7.4 6 7.1 7H4v1.5h3.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20V7h-8.1z"})),h=e=>{let{showEditButton:t,switchBackToURLInput:o,showFetchCaption:l,fetchCaption:n,url:a,showSettings:u,settingsLabel:b,settingsControl:h}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c.BlockControls,null,(0,r.createElement)(s.ToolbarGroup,null,t&&(0,r.createElement)(s.ToolbarButton,{className:"components-toolbar__control",label:(0,i.__)("Edit URL/ID","better-youtube-embed-block"),icon:m,onClick:o}),l&&(0,r.createElement)(s.ToolbarButton,{className:"components-toolbar__control",label:(0,i.__)("Fetch the video title as the caption","better-youtube-embed-block"),icon:p,onClick:()=>n(a)}),u&&(0,r.createElement)(s.Dropdown,{popoverProps:{position:"bottom right"},contentClassName:"byeb-dropdown",renderToggle:e=>{let{isOpen:t,onToggle:o}=e;return(0,r.createElement)(s.ToolbarButton,{label:b,onClick:o,"aria-haspopup":"true","aria-expanded":t,icon:d})},renderContent:()=>h}))))};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},y.apply(this,arguments)}var g=e=>{let{id:t="",isMaxResThumbnail:o=!1,playLabel:l,backgroundImage:n,params:a={}}=e;return n||(n=`https://img.youtube.com/vi/${t}/${o?"maxresdefault":"hqdefault"}.jpg`),(0,r.createElement)("div",y({id:`yb-video-${t}`,className:"yb-player","data-video-id":t,"data-title":l,style:{backgroundImage:`url(${n})`}},Object.keys(a).length?{"data-params":JSON.stringify(a)}:{}),(0,r.createElement)("button",{type:"button",className:"yb-btn-play"},(0,r.createElement)("span",{className:"visually-hidden"},l)))},v="figure";function _(e){var t;if(/^[a-zA-Z0-9_-]{11}$/.test(e))return e;const o=/(youtu.*be.*)\/(watch\?v=|embed\/|v|shorts|)(.*?((?=[&#?])|$))/gm.exec(e);return o&&null!==(t=o[3])&&void 0!==t?t:""}function f(e){let{aspectRatio:t}=e,o={};if(t&&/^((\.\d+)|(\d+(\.\d+)?)|(\d+\/([1-9]\d*)))$/.test(t)){const e=t.split("/"),l=e.length>1?parseFloat(e[0]/e[1]):e[0];l&&!isNaN(l)&&(o={"--byeb--aspect-ratio":`${parseFloat(100/l).toFixed(2)}%`})}return o}const{name:k}=a;var E={from:[{type:"block",blocks:["core/embed"],isMatch:e=>{let{providerNameSlug:t}=e;return"youtube"===t},transform:e=>{let{url:o,caption:l}=e;return(0,t.createBlock)(k,{url:o,caption:l})}}],to:[{type:"block",blocks:["core/embed"],transform:e=>{let{url:o,caption:l}=e;return o=o&&11===o.length?`https://youtu.be/${o}`:o,(0,t.createBlock)("core/embed",{url:o,caption:l,providerNameSlug:"youtube",responsive:!0})}}]};(0,t.registerBlockType)(a,{icon:n,transforms:E,edit:function(e){const{attributes:{url:t="",caption:o,isMaxResThumbnail:l,aspectRatio:a,customThumbnail:b,settings:m={}},isSelected:p,setAttributes:d,onFocus:y,clientId:k}=e,{multipleMode:E,videoIds:w="",playlistId:C="",loop:x=0,rel:T}=m,[R,I]=(0,r.useState)(t),M=_(t),S=_(R),[B,O]=(0,r.useState)(!1),N=!M||B,[j,L]=(0,r.useState)(!1),$=(0,r.useRef)(),P=e=>{e&&(11===e.length&&(e=`https://youtu.be/${e}`),fetch(`https://www.youtube.com/oembed?format=json&url=${e}`).then((e=>!!e.ok&&e.json())).then((e=>{e&&null!=e&&e.title&&d({caption:e.title})})).finally((()=>L(!1))))},F=(0,c.useBlockProps)({style:f({aspectRatio:a})}),V=c.useBlockEditingMode?(0,c.useBlockEditingMode)():"default";if(N)return(0,r.createElement)(v,F,(0,r.createElement)(u,{icon:n,label:(0,i.__)("Youtube URL or Youtube Video ID","better-youtube-embed-block"),onFocus:y,value:R,isInvalidURL:!S&&R&&(null==R?void 0:R.length)>5,onSubmit:e=>{e&&e.preventDefault(),O(!1),(e=>{!o&&S&&M!==S&&(L(!0),P(e)),d({url:e})})(R)},onChange:e=>{I(e.target.value)}}));const D=(0,i.__)("Media settings","better-youtube-embed-block"),H=(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c.MediaUploadCheck,null,(0,r.createElement)(s.BaseControl,null,(0,r.createElement)(s.BaseControl.VisualLabel,null,(0,i.__)("Custom thumbnail","better-youtube-embed-block")),(0,r.createElement)(s.TextControl,{value:null!=b?b:"",onChange:e=>d({customThumbnail:e}),placeholder:"https://example.com/bg.jpg",autoComplete:"off",className:"custom-video-thumbnail"}),(0,r.createElement)(c.MediaUpload,{title:(0,i.__)("Input custom thumbnail","better-youtube-embed-block"),onSelect:e=>d({customThumbnail:e.url}),allowedTypes:["image"],render:e=>{let{open:t}=e;return(0,r.createElement)(s.__experimentalHStack,{spacing:2,justify:"flex-start"},(0,r.createElement)(s.Button,{variant:"secondary",onClick:t,ref:$},b?(0,i.__)("Replace image","better-youtube-embed-block"):(0,i.__)("Select image","better-youtube-embed-block")),!!b&&(0,r.createElement)(s.Button,{onClick:()=>{d({customThumbnail:void 0}),$.current.focus()},variant:"secondary"},(0,i.__)("Remove image","better-youtube-embed-block")))}}))),(0,r.createElement)(s.ToggleControl,{label:(0,i.__)("Load the high-resolution image","better-youtube-embed-block"),checked:null!=l&&l,onChange:e=>d({isMaxResThumbnail:e}),help:(0,i.__)("Enable this setting only if the video has a high-resolution image.","better-youtube-embed-block"),disabled:!!b}),(0,r.createElement)(s.TextControl,{label:(0,i.__)("Aspect ratio","better-youtube-embed-block"),list:`${k}-aspect-ratio`,value:a,onChange:e=>d({aspectRatio:e}),placeholder:"16/9",autoComplete:"off",help:(0,i.__)("Set a custom aspect ratio for the video. Some common values are '16/9' for HD videos, '9/16' for short videos. The default value is '16/9'.","better-youtube-embed-block")}),(0,r.createElement)("datalist",{id:`${k}-aspect-ratio`},(0,r.createElement)("option",{value:"9/16"}),(0,r.createElement)("option",{value:"1"}),(0,r.createElement)("option",{value:"4/3"}),(0,r.createElement)("option",{value:"2"}),(0,r.createElement)("option",{value:"21/9"})),(0,r.createElement)(s.__experimentalToggleGroupControl,{isBlock:!0,isDeselectable:!0,label:(0,i.__)("Multiple mode","better-youtube-embed-block"),value:E,onChange:e=>d({settings:{...m,multipleMode:e}}),className:"byeb-multiple-mode"},(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":(0,i.__)("Multiple videos","better-youtube-embed-block"),label:(0,i.__)("Multiple","better-youtube-embed-block"),showTooltip:!0,value:"multiple"}),(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":(0,i.__)("The whole playlist","better-youtube-embed-block"),label:(0,i.__)("Playlist","better-youtube-embed-block"),showTooltip:!0,value:"playlist"})),"multiple"===E&&(0,r.createElement)(s.TextControl,{label:(0,i.__)("Input video IDs","better-youtube-embed-block"),value:w,onChange:e=>d({settings:{...m,videoIds:e}}),help:(0,i.__)("Input a comma-separated list of video IDs","better-youtube-embed-block"),autoComplete:"off"}),"playlist"===E&&(0,r.createElement)(s.TextControl,{label:(0,i.__)("Input a playlist ID","better-youtube-embed-block"),value:C,onChange:e=>d({settings:{...m,playlistId:e}}),help:(0,i.__)("Make sure the initial video is from this playlist.","better-youtube-embed-block"),autoComplete:"off"}),(0,r.createElement)(s.ToggleControl,{label:(0,i.__)("Loop continuously","better-youtube-embed-block"),checked:1===x,onChange:e=>d({settings:{...m,loop:e?1:0}}),help:(0,i.__)("Play all other videos or the entire playlist, if any, and then start again. If there is only one video, it will play repeatedly.","better-youtube-embed-block")}),(0,r.createElement)(s.ToggleControl,{label:(0,i.__)("Show related videos from the same channel","better-youtube-embed-block"),checked:0===T,onChange:e=>d({settings:{...m,rel:e?0:1}})}));return(0,r.createElement)(r.Fragment,null,p&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(h,{showEditButton:M,switchBackToURLInput:()=>O(!0),showFetchCaption:!!_(t),url:t,fetchCaption:P,showSettings:"contentOnly"===V,settingsLabel:D,settingsControl:H}),M&&(0,r.createElement)(c.InspectorControls,{group:"settings"},(0,r.createElement)(s.PanelBody,{title:D,initialOpen:!0},H))),(0,r.createElement)(v,F,!N&&M&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(g,{id:M,playLabel:(0,i.__)("Play","better-youtube-embed-block"),isMaxResThumbnail:l,backgroundImage:b}),j?(0,r.createElement)(s.Spinner,null):(0,r.createElement)(c.RichText,{tagName:"figcaption",className:"yb-caption",placeholder:(0,i.__)("Add caption","better-youtube-embed-block"),value:o,onChange:e=>d({caption:e}),inlineToolbar:!0}))))},save:function(e){const{attributes:{url:t,caption:o,aspectRatio:l,isMaxResThumbnail:n,customThumbnail:a,settings:{multipleMode:i,videoIds:s,playlistId:u,loop:b=0,rel:m=1}={}}}=e,p=_(t),d={};return i&&("multiple"===i&&s?d.playlist=`${p},${s}`:"playlist"===i&&u&&(d.list=u)),1===b&&(d.loop=1,null!=d&&d.playlist||null!=d&&d.list||(d.playlist=p)),0===m&&(d.rel=0),(0,r.createElement)(v,c.useBlockProps.save({style:f({aspectRatio:l})}),p&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(g,{id:p,playLabel:"Play",isMaxResThumbnail:n,backgroundImage:a,params:d}),!c.RichText.isEmpty(o)&&(0,r.createElement)(c.RichText.Content,{className:"yb-caption",tagName:"figcaption",value:o})))}})}},o={};function l(e){var n=o[e];if(void 0!==n)return n.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=function(t,o,n,a){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],a=e[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||r>=a)&&Object.keys(l.O).every((function(e){return l.O[e](o[c])}))?o.splice(c--,1):(i=!1,a<r&&(r=a));if(i){e.splice(u--,1);var s=n();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,n,a]},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};l.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,r=o[0],i=o[1],c=o[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(c)var u=c(l)}for(t&&t(o);s<r.length;s++)a=r[s],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(u)},o=self.webpackChunkyoutube_block=self.webpackChunkyoutube_block||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var n=l.O(void 0,[431],(function(){return l(677)}));n=l.O(n)}();